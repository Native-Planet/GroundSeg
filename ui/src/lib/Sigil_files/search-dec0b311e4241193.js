(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{6793:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return a(9710)}])},1623:function(e,s,a){"use strict";var r=a(1527),n=a(312),t=a(329),l=a(5479);let i=e=>{let{children:s}=e;return(0,r.jsxs)(n.Ar,{className:"bg-gray-800 text-gray-50",children:[(0,r.jsx)(n.X2,{className:"bg-gray-800 text-gray-100",children:(0,r.jsx)(n.W2,{children:(0,r.jsx)(t.Z,{dark:!0})})}),(0,r.jsx)(n.or,{className:"py-6 lg:py-12",children:(0,r.jsx)(n.W2,{children:s})}),(0,r.jsx)(n.X2,{className:"border-t border-gray-300 bg-gray-200 text-gray-600",children:(0,r.jsx)(n.W2,{children:(0,r.jsx)(l.Z,{})})})]})};s.Z=i},9710:function(e,s,a){"use strict";a.r(s);var r=a(1527),n=a(959),t=a(5623),l=a.n(t),i=a(3963),c=a(1626),d=a(8449),o=a(7746),x=a.n(o),h=a(1623),m=a(7848),u=a(2615),p=a(1699);async function g(e,s){let[a,r,n,t]=e;return fetch("/api/search",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({query:"\n  query Search($nw: String, $ne: String, $sw: String, $se: String, $page: Int) {\n    search(nw: $nw, ne: $ne, sw: $sw, se: $se, page: $page) {\n      planets\n      count\n      shape {\n        prob\n      }\n    }\n  }",variables:{nw:a,ne:r,sw:n,se:t,page:s}})}).then(e=>e.json())}let b=()=>{let e,s,a,t;let[o,b,j,y]=(0,p.Z)(),[N,f]=(0,n.useState)(0),v=(0,i.useRouter)(),w=function(e){let[s,a,r,n]=e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;v.push({pathname:"/search",query:{...s&&{nw:s},...a&&{ne:a},...r&&{sw:r},...n&&{se:n},page:t}})},S=e=>{w([null==o?void 0:o.id,null==b?void 0:b.id,null==j?void 0:j.id,null==y?void 0:y.id],e+1)};(0,n.useEffect)(()=>{v.query.page&&Number.parseInt(v.query.page)>0?f(Number.parseInt(v.query.page)-1):f(0)},[v]);let{data:k,error:C}=(0,c.Z)([null==o?void 0:o.id,null==b?void 0:b.id,null==j?void 0:j.id,null==y?void 0:y.id,N],g);return C?t="Search Request Error":(null==k?void 0:k.errors)?t="Database Error":(null==k?void 0:k.data)&&(e=k.data.search.planets,s=k.data.search.count,a=Number.parseInt(k.data.search.shape.prob)),(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(d.PB,{title:"Search",titleTemplate:"%s | urbit.me"}),(0,r.jsx)("div",{className:"row py-2 sm:py-4 md:py-8",children:(0,r.jsxs)("div",{className:"mb-12",children:[(0,r.jsx)("div",{className:"mx-auto",children:(0,r.jsx)(m.Z,{onSearch:w})}),(0,r.jsxs)("div",{className:"mt-4 sm:mt-12 text-xl sm:text-3xl",children:[(a||0===a)&&(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between max-w-4xl mx-auto border-2 border-gray-500 rounded-lg px-6 py-2 mb-6",children:[(0,r.jsx)("div",{className:"md:mr-6",children:"This shape:"}),(0,r.jsxs)("div",{className:"md:mr-24",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"tracking-wider",children:a.toLocaleString()})," total instances"]}),(0,r.jsx)("div",{children:a>=65536?(0,r.jsxs)("span",{children:["~ ",(0,r.jsx)("strong",{className:"tracking-wider",children:Math.floor(parseFloat(a/65536)).toLocaleString()})," per Star on average"]}):(0,r.jsxs)("span",{children:["~ 1 for every ",(0,r.jsx)("strong",{className:"tracking-wider",children:0==a?"Infinity":Math.floor(parseFloat(65536/a)).toLocaleString()})," stars"]})})]})]}),(0,r.jsxs)("div",{className:"max-w-5xl mx-auto text-2xl sm:text-3xl text-center",children:[!C&&!k&&"Loading...",t,e&&(e.length>0?"".concat(s," planets found"):"No Search Results")]}),(0,r.jsx)("div",{className:"flex flex-row flex-wrap justify-center",children:e&&e.map(e=>(0,r.jsx)("div",{className:"flex flex-col justify-between w-32 sm:w-44 my-2 mx-2 border rounded border-gray-600 hover:border-gray-500 text-center transition duration-150",children:(0,r.jsxs)(l(),{href:"/".concat(e),children:[(0,r.jsx)("div",{className:"my-4 mx-5",children:(0,r.jsx)(u.Z,{patp:e,size:192,colors:["#1F2937","white"]})}),(0,r.jsx)("div",{className:"text-sm sm:text-base font-semibold pb-3 whitespace-nowrap",children:e})]})},e))}),e&&s>100&&(0,r.jsx)("div",{className:"text-center py-3",children:(0,r.jsx)(x(),{disableInitialCallback:!0,previousLabel:"<<",nextLabel:">>",breakLabel:"...",breakClassName:"inline-block px-1",pageCount:Math.ceil(s/100),forcePage:N,marginPagesDisplayed:3,pageRangeDisplayed:3,onPageChange:e=>S(e.selected),containerClassName:"pagination",pageClassName:"inline-block px-3",previousClassName:"inline-block pr-3",nextClassName:"inline-block pl-3",activeClassName:"font-semibold",disabledClassName:"text-gray-600"})})]})]})})]})};s.default=b}},function(e){e.O(0,[352,433,829,276,404,258,774,888,179],function(){return e(e.s=6793)}),_N_E=e.O()}]);